buildscript {
  repositories {
    maven {
      url "${nexusUrl}"
    }
  }
  dependencies {
    classpath "org.springframework.boot:spring-boot-gradle-plugin:2.1.4.RELEASE"
  }
}

plugins {
  id 'org.sonarqube' version '2.6.2'
}

/*
 * This build file was auto generated by running the Gradle 'init' task
 * by 'gabriel.oliveira' at '28/06/16 16:56' with Gradle 2.13
 *
 * This generated file contains a sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/2.13/userguide/tutorial_java_projects.html
 */

// Apply the java plugin to add support for Java
apply plugin: 'java'
apply plugin: 'groovy'
apply plugin: 'application'
apply plugin: "org.springframework.boot"
apply plugin: 'io.spring.dependency-management'
apply from: "$projectDir/gradle/publishing.gradle"


group 'br.com.gabriel.joe'
version '2.0.1'

repositories {
	maven { url "${nexusUrl}" }
	maven { url "https://plugins.gradle.org/m2/" }
	jcenter()
}


task packageDistribution(type: Zip) {
	mkdir ("$buildDir/aws")
	archiveName = "chef-aws.${version}.zip"
	destinationDir = file("$buildDir/aws/")
	from "$buildDir/libs/chef-aws-${version}.jar"
	rename "chef-aws-${version}.jar", "chef-aws.jar"
}

task bootRunDev(type: org.springframework.boot.gradle.tasks.run.BootRun, dependsOn: 'build') {
    group = 'Application'
    doFirst() {
        main = bootJar.mainClassName
        classpath = sourceSets.main.runtimeClasspath
        systemProperty 'spring.profiles.active', 'dev'
    }
}

mainClassName = 'br.com.gabriel.joe.chef.aws.main.App'

dependencies {
	compile 'org.springframework.cloud:spring-cloud-aws-autoconfigure:2.1.1.RELEASE'
	compile 'org.springframework.cloud:spring-cloud-aws-messaging:2.1.1.RELEASE'
	compile 'org.springframework.boot:spring-boot-starter-web:2.1.4.RELEASE'
	compile 'org.springframework.boot:spring-boot-starter-actuator:2.1.4.RELEASE'
	compile 'org.springframework.boot:spring-boot:2.1.4.RELEASE'
	compile 'org.springframework.boot:spring-boot-devtools'
	compile 'org.springframework:spring-web:5.1.6.RELEASE'
	compile 'org.thymeleaf:thymeleaf-spring5:3.0.11.RELEASE'
	compile 'nz.net.ultraq.thymeleaf:thymeleaf-layout-dialect:2.4.1'
	compile 'ch.qos.logback:logback-classic:1.2.3'
	compile 'br.com.mv.gcm.etl:gcm-etl-app:02.004'
	compile 'org.codehaus.groovy.modules.http-builder:http-builder:0.7.1'
	compile ('org.apache.jclouds.driver:jclouds-bouncycastle:2.1.0') {
		exclude group: 'org.bouncycastle', module: 'bcprov-jdk16'
	}
	compile 'org.apache.jclouds.driver:jclouds-sshj:2.1.0'
	compile 'org.apache.jclouds.driver:jclouds-enterprise:2.1.0'
	compile 'org.codehaus.groovy:groovy-all:2.4.16'
	compile 'com.google.code.gson:gson:2.8.4'
	compile 'com.oracle:ojdbc6:11.2.0.3'
	compile 'commons-io:commons-io:2.5'
	compile 'org.apache.commons:commons-compress:1.9'
	compile 'commons-configuration:commons-configuration:1.10'
    testCompile 'junit:junit:4.12'
	
}
